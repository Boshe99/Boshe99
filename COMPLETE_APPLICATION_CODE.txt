================================================================================
STRIPE CONNECT DASHBOARD - COMPLETE APPLICATION CODE
================================================================================

This file contains all the code needed to run the Stripe Connect Dashboard.
Copy and paste each section into the corresponding file in your project.

================================================================================
FILE 1: /app/backend/server.py
================================================================================

from fastapi import FastAPI, APIRouter, HTTPException, Header
from dotenv import load_dotenv
from starlette.middleware.cors import CORSMiddleware
from motor.motor_asyncio import AsyncIOMotorClient
import os
import logging
from pathlib import Path
from pydantic import BaseModel, Field, ConfigDict
from typing import List, Optional, Dict, Any
import uuid
from datetime import datetime, timezone
import stripe

ROOT_DIR = Path(__file__).parent
load_dotenv(ROOT_DIR / '.env')

# MongoDB connection
mongo_url = os.environ['MONGO_URL']
client = AsyncIOMotorClient(mongo_url)
db = client[os.environ['DB_NAME']]

# Create the main app without a prefix
app = FastAPI()

# Create a router with the /api prefix
api_router = APIRouter(prefix="/api")

# Define Models
class StatusCheck(BaseModel):
    model_config = ConfigDict(extra="ignore")
    id: str = Field(default_factory=lambda: str(uuid.uuid4()))
    client_name: str
    timestamp: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))

class StatusCheckCreate(BaseModel):
    client_name: str

# Stripe Connect Models
class AccountInfo(BaseModel):
    id: str
    type: str
    email: Optional[str] = None
    business_profile: Optional[Dict[str, Any]] = None
    charges_enabled: bool
    payouts_enabled: bool
    requirements: Optional[Dict[str, Any]] = None

class BankAccountData(BaseModel):
    id: str
    object: str
    account_holder_name: Optional[str] = None
    account_holder_type: Optional[str] = None
    bank_name: Optional[str] = None
    country: str
    currency: str
    last4: str
    routing_number: Optional[str] = None
    status: str
    default_for_currency: bool

class AddBankAccountRequest(BaseModel):
    account_number: str
    routing_number: str
    account_holder_name: str
    account_holder_type: str = "individual"  # or "company"

class UpdateProfileRequest(BaseModel):
    business_name: Optional[str] = None
    url: Optional[str] = None
    support_phone: Optional[str] = None
    support_email: Optional[str] = None

class CreatePayoutRequest(BaseModel):
    amount: float
    currency: str = "usd"
    description: Optional[str] = None

# Helper function to get Stripe API key from header
def get_stripe_key(authorization: str = Header(None)) -> str:
    if not authorization:
        raise HTTPException(status_code=401, detail="API key required")
    if authorization.startswith("Bearer "):
        return authorization.replace("Bearer ", "")
    return authorization

# Test endpoint
@api_router.get("/")
async def root():
    return {"message": "Stripe Connect Management API"}

# Get account information
@api_router.get("/stripe/account")
async def get_account(authorization: str = Header(None)):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        account = stripe.Account.retrieve()
        
        # Safely get attributes that might not exist
        business_profile = getattr(account, 'business_profile', None)
        requirements = getattr(account, 'requirements', None)
        
        return {
            "id": account.id,
            "type": account.type,
            "email": getattr(account, 'email', None),
            "business_profile": dict(business_profile) if business_profile else {},
            "charges_enabled": account.charges_enabled,
            "payouts_enabled": account.payouts_enabled,
            "requirements": dict(requirements) if requirements else {},
            "country": account.country,
            "default_currency": account.default_currency,
        }
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Get all payouts
@api_router.get("/stripe/payouts")
async def get_payouts(authorization: str = Header(None), limit: int = 10):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        payouts = stripe.Payout.list(limit=limit)
        return {
            "data": [
                {
                    "id": payout.id,
                    "amount": payout.amount / 100,  # Convert from cents
                    "currency": payout.currency,
                    "arrival_date": payout.arrival_date,
                    "status": payout.status,
                    "description": payout.description,
                    "created": payout.created,
                    "method": payout.method,
                    "type": payout.type,
                }
                for payout in payouts.data
            ]
        }
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Create a payout
@api_router.post("/stripe/payouts")
async def create_payout(request: CreatePayoutRequest, authorization: str = Header(None)):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        # Convert to cents
        amount_cents = int(request.amount * 100)
        
        payout = stripe.Payout.create(
            amount=amount_cents,
            currency=request.currency,
            description=request.description,
        )
        
        return {
            "id": payout.id,
            "amount": payout.amount / 100,
            "currency": payout.currency,
            "status": payout.status,
            "arrival_date": payout.arrival_date,
            "description": payout.description,
        }
    except stripe.InvalidRequestError as e:
        raise HTTPException(status_code=400, detail=str(e))
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Cancel a payout
@api_router.post("/stripe/payouts/{payout_id}/cancel")
async def cancel_payout(payout_id: str, authorization: str = Header(None)):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        payout = stripe.Payout.retrieve(payout_id)
        payout.cancel()
        
        return {"message": "Payout cancelled successfully", "payout_id": payout_id}
    except stripe.InvalidRequestError as e:
        raise HTTPException(status_code=400, detail=str(e))
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Get all bank accounts
@api_router.get("/stripe/bank-accounts")
async def get_bank_accounts(authorization: str = Header(None)):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        account = stripe.Account.retrieve()
        
        try:
            # Try to get external accounts - this may fail for standard accounts
            external_accounts = stripe.Account.list_external_accounts(
                account.id,
                object="bank_account",
                limit=10
            )
            
            return {
                "data": [
                    {
                        "id": ba.id,
                        "object": ba.object,
                        "account_holder_name": getattr(ba, 'account_holder_name', None),
                        "account_holder_type": getattr(ba, 'account_holder_type', None),
                        "bank_name": getattr(ba, 'bank_name', None),
                        "country": ba.country,
                        "currency": ba.currency,
                        "last4": ba.last4,
                        "routing_number": getattr(ba, 'routing_number', None),
                        "status": ba.status,
                        "default_for_currency": getattr(ba, 'default_for_currency', False),
                    }
                    for ba in external_accounts.data
                ]
            }
        except stripe.PermissionError:
            # If permissions issue, return empty list with message
            return {
                "data": [],
                "message": "Bank account management requires additional permissions. Please use the Stripe Dashboard."
            }
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Add a bank account
@api_router.post("/stripe/bank-accounts")
async def add_bank_account(request: AddBankAccountRequest, authorization: str = Header(None)):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        account = stripe.Account.retrieve()
        
        # Create token for bank account
        token = stripe.Token.create(
            bank_account={
                "country": "US",
                "currency": "usd",
                "account_holder_name": request.account_holder_name,
                "account_holder_type": request.account_holder_type,
                "routing_number": request.routing_number,
                "account_number": request.account_number,
            },
        )
        
        # Add bank account to account
        bank_account = stripe.Account.create_external_account(
            account.id,
            external_account=token.id,
        )
        
        return {
            "id": bank_account.id,
            "bank_name": bank_account.bank_name,
            "last4": bank_account.last4,
            "status": bank_account.status,
        }
    except stripe.InvalidRequestError as e:
        raise HTTPException(status_code=400, detail=str(e))
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Delete a bank account
@api_router.delete("/stripe/bank-accounts/{bank_account_id}")
async def delete_bank_account(bank_account_id: str, authorization: str = Header(None)):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        account = stripe.Account.retrieve()
        stripe.Account.delete_external_account(
            account.id,
            bank_account_id,
        )
        
        return {"message": "Bank account deleted successfully", "bank_account_id": bank_account_id}
    except stripe.InvalidRequestError as e:
        raise HTTPException(status_code=400, detail=str(e))
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Set default bank account
@api_router.post("/stripe/bank-accounts/{bank_account_id}/default")
async def set_default_bank_account(bank_account_id: str, authorization: str = Header(None)):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        account = stripe.Account.retrieve()
        stripe.Account.modify_external_account(
            account.id,
            bank_account_id,
            default_for_currency=True,
        )
        
        return {"message": "Default bank account set successfully", "bank_account_id": bank_account_id}
    except stripe.InvalidRequestError as e:
        raise HTTPException(status_code=400, detail=str(e))
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Update account profile
@api_router.put("/stripe/profile")
async def update_profile(request: UpdateProfileRequest, authorization: str = Header(None)):
    try:
        api_key = get_stripe_key(authorization)
        stripe.api_key = api_key
        
        account = stripe.Account.retrieve()
        
        # Check if this is a standard account (own account)
        # Standard accounts cannot modify their own business profile via API
        # They must use the Stripe Dashboard
        if account.type == "standard":
            raise HTTPException(
                status_code=403, 
                detail="Standard Stripe accounts must update business profile through the Stripe Dashboard at https://dashboard.stripe.com/settings/business"
            )
        
        update_data = {}
        business_profile = {}
        
        if request.business_name:
            business_profile["name"] = request.business_name
        if request.url:
            business_profile["url"] = request.url
        if request.support_phone:
            business_profile["support_phone"] = request.support_phone
        if request.support_email:
            business_profile["support_email"] = request.support_email
        
        if business_profile:
            update_data["business_profile"] = business_profile
        
        # This will only work for Connect accounts
        updated_account = stripe.Account.modify(account.id, **update_data)
        
        return {
            "message": "Profile updated successfully",
            "business_profile": dict(updated_account.business_profile) if updated_account.business_profile else {},
        }
    except stripe.InvalidRequestError as e:
        raise HTTPException(status_code=400, detail=str(e))
    except stripe.AuthenticationError:
        raise HTTPException(status_code=401, detail="Invalid API key")
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# Include the router in the main app
app.include_router(api_router)

app.add_middleware(
    CORSMiddleware,
    allow_credentials=True,
    allow_origins=os.environ.get('CORS_ORIGINS', '*').split(','),
    allow_methods=["*"],
    allow_headers=["*"],
)

# Configure logging
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

@app.on_event("shutdown")
async def shutdown_db_client():
    client.close()

================================================================================
FILE 2: /app/backend/requirements.txt
================================================================================

fastapi==0.110.1
uvicorn==0.25.0
stripe==13.0.1
python-dotenv>=1.0.1
pymongo==4.5.0
motor==3.3.1
pydantic>=2.6.4
requests>=2.31.0

================================================================================
FILE 3: /app/backend/.env
================================================================================

MONGO_URL="mongodb://localhost:27017"
DB_NAME="stripe_dashboard"
CORS_ORIGINS="*"

================================================================================
FILE 4: /app/frontend/src/App.js
================================================================================

import { useState, useEffect } from 'react';
import '@/App.css';
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import axios from 'axios';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Label } from '@/components/ui/label';
import { useToast } from '@/hooks/use-toast';
import { Toaster } from '@/components/ui/sonner';
import { toast } from 'sonner';
import { Badge } from '@/components/ui/badge';
import { Separator } from '@/components/ui/separator';

const BACKEND_URL = process.env.REACT_APP_BACKEND_URL;
const API = `${BACKEND_URL}/api`;

const Home = () => {
  const [apiKey, setApiKey] = useState(localStorage.getItem('stripe_api_key') || '');
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [loading, setLoading] = useState(false);
  const [account, setAccount] = useState(null);
  const [payouts, setPayouts] = useState([]);
  const [bankAccounts, setBankAccounts] = useState([]);
  
  // Payout form
  const [payoutAmount, setPayoutAmount] = useState('');
  const [payoutCurrency, setPayoutCurrency] = useState('usd');
  const [payoutDescription, setPayoutDescription] = useState('');
  
  // Bank account form
  const [accountNumber, setAccountNumber] = useState('');
  const [routingNumber, setRoutingNumber] = useState('');
  const [accountHolderName, setAccountHolderName] = useState('');
  const [accountHolderType, setAccountHolderType] = useState('individual');
  
  // Profile form
  const [businessName, setBusinessName] = useState('');
  const [businessUrl, setBusinessUrl] = useState('');
  const [supportPhone, setSupportPhone] = useState('');
  const [supportEmail, setSupportEmail] = useState('');

  const axiosConfig = {
    headers: {
      'Authorization': `Bearer ${apiKey}`
    }
  };

  const handleLogin = async () => {
    if (!apiKey.trim()) {
      toast.error('Please enter your Stripe API key');
      return;
    }
    
    setLoading(true);
    try {
      const response = await axios.get(`${API}/stripe/account`, axiosConfig);
      setAccount(response.data);
      setIsAuthenticated(true);
      localStorage.setItem('stripe_api_key', apiKey);
      toast.success('Connected to Stripe successfully!');
      
      // Load initial data
      loadPayouts();
      loadBankAccounts();
    } catch (error) {
      toast.error(error.response?.data?.detail || 'Invalid API key');
    } finally {
      setLoading(false);
    }
  };

  const handleLogout = () => {
    setApiKey('');
    setIsAuthenticated(false);
    setAccount(null);
    localStorage.removeItem('stripe_api_key');
    toast.success('Logged out successfully');
  };

  const loadPayouts = async () => {
    try {
      const response = await axios.get(`${API}/stripe/payouts`, axiosConfig);
      setPayouts(response.data.data);
    } catch (error) {
      console.error('Error loading payouts:', error);
    }
  };

  const loadBankAccounts = async () => {
    try {
      const response = await axios.get(`${API}/stripe/bank-accounts`, axiosConfig);
      setBankAccounts(response.data.data);
    } catch (error) {
      console.error('Error loading bank accounts:', error);
    }
  };

  const handleCreatePayout = async () => {
    if (!payoutAmount || parseFloat(payoutAmount) <= 0) {
      toast.error('Please enter a valid amount');
      return;
    }
    
    setLoading(true);
    try {
      await axios.post(`${API}/stripe/payouts`, {
        amount: parseFloat(payoutAmount),
        currency: payoutCurrency,
        description: payoutDescription
      }, axiosConfig);
      
      toast.success('Payout created successfully!');
      setPayoutAmount('');
      setPayoutDescription('');
      loadPayouts();
    } catch (error) {
      toast.error(error.response?.data?.detail || 'Failed to create payout');
    } finally {
      setLoading(false);
    }
  };

  const handleCancelPayout = async (payoutId) => {
    setLoading(true);
    try {
      await axios.post(`${API}/stripe/payouts/${payoutId}/cancel`, {}, axiosConfig);
      toast.success('Payout cancelled successfully!');
      loadPayouts();
    } catch (error) {
      toast.error(error.response?.data?.detail || 'Failed to cancel payout');
    } finally {
      setLoading(false);
    }
  };

  const handleAddBankAccount = async () => {
    if (!accountNumber || !routingNumber || !accountHolderName) {
      toast.error('Please fill in all bank account fields');
      return;
    }
    
    setLoading(true);
    try {
      await axios.post(`${API}/stripe/bank-accounts`, {
        account_number: accountNumber,
        routing_number: routingNumber,
        account_holder_name: accountHolderName,
        account_holder_type: accountHolderType
      }, axiosConfig);
      
      toast.success('Bank account added successfully!');
      setAccountNumber('');
      setRoutingNumber('');
      setAccountHolderName('');
      loadBankAccounts();
    } catch (error) {
      toast.error(error.response?.data?.detail || 'Failed to add bank account');
    } finally {
      setLoading(false);
    }
  };

  const handleDeleteBankAccount = async (bankAccountId) => {
    setLoading(true);
    try {
      await axios.delete(`${API}/stripe/bank-accounts/${bankAccountId}`, axiosConfig);
      toast.success('Bank account deleted successfully!');
      loadBankAccounts();
    } catch (error) {
      toast.error(error.response?.data?.detail || 'Failed to delete bank account');
    } finally {
      setLoading(false);
    }
  };

  const handleSetDefaultBankAccount = async (bankAccountId) => {
    setLoading(true);
    try {
      await axios.post(`${API}/stripe/bank-accounts/${bankAccountId}/default`, {}, axiosConfig);
      toast.success('Default bank account set successfully!');
      loadBankAccounts();
    } catch (error) {
      toast.error(error.response?.data?.detail || 'Failed to set default bank account');
    } finally {
      setLoading(false);
    }
  };

  const handleUpdateProfile = async () => {
    const updates = {};
    if (businessName) updates.business_name = businessName;
    if (businessUrl) updates.url = businessUrl;
    if (supportPhone) updates.support_phone = supportPhone;
    if (supportEmail) updates.support_email = supportEmail;
    
    if (Object.keys(updates).length === 0) {
      toast.error('Please fill in at least one field to update');
      return;
    }
    
    setLoading(true);
    try {
      await axios.put(`${API}/stripe/profile`, updates, axiosConfig);
      toast.success('Profile updated successfully!');
      // Reload account data
      const response = await axios.get(`${API}/stripe/account`, axiosConfig);
      setAccount(response.data);
    } catch (error) {
      toast.error(error.response?.data?.detail || 'Failed to update profile');
    } finally {
      setLoading(false);
    }
  };

  const formatDate = (timestamp) => {
    return new Date(timestamp * 1000).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  const getStatusBadge = (status) => {
    const variants = {
      paid: 'default',
      pending: 'secondary',
      in_transit: 'secondary',
      canceled: 'destructive',
      failed: 'destructive'
    };
    return <Badge variant={variants[status] || 'default'}>{status}</Badge>;
  };

  if (!isAuthenticated) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center p-4">
        <Card className="w-full max-w-md shadow-2xl border-0">
          <CardHeader className="space-y-3">
            <div className="flex justify-center mb-4">
              <div className="h-16 w-16 rounded-full bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center shadow-lg">
                <svg className="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                </svg>
              </div>
            </div>
            <CardTitle className="text-2xl text-center">Stripe Connect Dashboard</CardTitle>
            <CardDescription className="text-center">
              Enter your Stripe API key to manage payouts, bank accounts, and profile
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="space-y-2">
              <Label htmlFor="apiKey">Stripe API Key</Label>
              <Input
                id="apiKey"
                type="password"
                placeholder="sk_test_..." 
                value={apiKey}
                onChange={(e) => setApiKey(e.target.value)}
                onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                data-testid="api-key-input"
              />
            </div>
            <Button 
              onClick={handleLogin} 
              disabled={loading} 
              className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"
              data-testid="login-button"
            >
              {loading ? 'Connecting...' : 'Connect to Stripe'}
            </Button>
            <p className="text-xs text-center text-gray-500 mt-4">
              Your API key is stored locally and never sent to our servers
            </p>
          </CardContent>
        </Card>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
      <div className="container mx-auto p-6 max-w-7xl">
        {/* Header */}
        <div className="mb-8">
          <div className="flex justify-between items-center">
            <div>
              <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
                Stripe Connect Dashboard
              </h1>
              <p className="text-gray-600 mt-2">Manage your payouts, bank accounts, and business profile</p>
            </div>
            <Button 
              onClick={handleLogout} 
              variant="outline"
              data-testid="logout-button"
            >
              Logout
            </Button>
          </div>
        </div>

        {/* Account Overview */}
        {account && (
          <Card className="mb-6 shadow-lg border-0" data-testid="account-overview">
            <CardHeader>
              <CardTitle>Account Overview</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                  <p className="text-sm text-gray-500">Account ID</p>
                  <p className="font-semibold" data-testid="account-id">{account.id}</p>
                </div>
                <div>
                  <p className="text-sm text-gray-500">Email</p>
                  <p className="font-semibold" data-testid="account-email">{account.email || 'Not set'}</p>
                </div>
                <div>
                  <p className="text-sm text-gray-500">Status</p>
                  <div className="flex gap-2 mt-1">
                    {account.charges_enabled ? (
                      <Badge className="bg-green-100 text-green-800">Charges Enabled</Badge>
                    ) : (
                      <Badge variant="destructive">Charges Disabled</Badge>
                    )}
                    {account.payouts_enabled ? (
                      <Badge className="bg-green-100 text-green-800">Payouts Enabled</Badge>
                    ) : (
                      <Badge variant="destructive">Payouts Disabled</Badge>
                    )}
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>
        )}

        {/* Main Content */}
        <Tabs defaultValue="payouts" className="space-y-6">
          <TabsList className="grid w-full grid-cols-3 lg:w-auto">
            <TabsTrigger value="payouts" data-testid="payouts-tab">Payouts</TabsTrigger>
            <TabsTrigger value="bank-accounts" data-testid="bank-accounts-tab">Bank Accounts</TabsTrigger>
            <TabsTrigger value="profile" data-testid="profile-tab">Profile</TabsTrigger>
          </TabsList>

          {/* Payouts Tab */}
          <TabsContent value="payouts" className="space-y-6">
            <Card className="shadow-lg border-0">
              <CardHeader>
                <CardTitle>Create Payout</CardTitle>
                <CardDescription>Schedule a new payout to your bank account</CardDescription>
              </CardHeader>
              <CardContent className="space-y-4">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="space-y-2">
                    <Label htmlFor="payoutAmount">Amount</Label>
                    <Input
                      id="payoutAmount"
                      type="number"
                      step="0.01"
                      placeholder="100.00"
                      value={payoutAmount}
                      onChange={(e) => setPayoutAmount(e.target.value)}
                      data-testid="payout-amount-input"
                    />
                  </div>
                  <div className="space-y-2">
                    <Label htmlFor="payoutCurrency">Currency</Label>
                    <Input
                      id="payoutCurrency"
                      type="text"
                      value={payoutCurrency}
                      onChange={(e) => setPayoutCurrency(e.target.value)}
                      data-testid="payout-currency-input"
                    />
                  </div>
                </div>
                <div className="space-y-2">
                  <Label htmlFor="payoutDescription">Description (optional)</Label>
                  <Input
                    id="payoutDescription"
                    placeholder="Monthly payout"
                    value={payoutDescription}
                    onChange={(e) => setPayoutDescription(e.target.value)}
                    data-testid="payout-description-input"
                  />
                </div>
                <Button 
                  onClick={handleCreatePayout} 
                  disabled={loading}
                  className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"
                  data-testid="create-payout-button"
                >
                  {loading ? 'Creating...' : 'Create Payout'}
                </Button>
              </CardContent>
            </Card>

            <Card className="shadow-lg border-0">
              <CardHeader>
                <CardTitle>Recent Payouts</CardTitle>
                <CardDescription>View and manage your payout history</CardDescription>
              </CardHeader>
              <CardContent>
                {payouts.length === 0 ? (
                  <p className="text-center text-gray-500 py-8">No payouts found</p>
                ) : (
                  <div className="space-y-4">
                    {payouts.map((payout) => (
                      <div key={payout.id} className="border rounded-lg p-4 hover:shadow-md transition-shadow" data-testid={`payout-${payout.id}`}>
                        <div className="flex justify-between items-start">
                          <div className="flex-1">
                            <div className="flex items-center gap-3 mb-2">
                              <p className="font-semibold text-lg">
                                ${payout.amount.toFixed(2)} {payout.currency.toUpperCase()}
                              </p>
                              {getStatusBadge(payout.status)}
                            </div>
                            <p className="text-sm text-gray-600">{payout.description || 'No description'}</p>
                            <div className="flex gap-4 mt-2 text-xs text-gray-500">
                              <span>Arrival: {formatDate(payout.arrival_date)}</span>
                              <span>Created: {formatDate(payout.created)}</span>
                            </div>
                          </div>
                          {payout.status === 'pending' && (
                            <Button 
                              onClick={() => handleCancelPayout(payout.id)} 
                              variant="destructive" 
                              size="sm"
                              disabled={loading}
                              data-testid={`cancel-payout-${payout.id}`}
                            >
                              Cancel
                            </Button>
                          )}
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </CardContent>
            </Card>
          </TabsContent>

          {/* Bank Accounts Tab */}
          <TabsContent value="bank-accounts" className="space-y-6">
            <Card className="shadow-lg border-0">
              <CardHeader>
                <CardTitle>Add Bank Account</CardTitle>
                <CardDescription>Add a new bank account for payouts</CardDescription>
              </CardHeader>
              <CardContent className="space-y-4">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="space-y-2">
                    <Label htmlFor="accountNumber">Account Number</Label>
                    <Input
                      id="accountNumber"
                      type="text"
                      placeholder="000123456789"
                      value={accountNumber}
                      onChange={(e) => setAccountNumber(e.target.value)}
                      data-testid="account-number-input"
                    />
                  </div>
                  <div className="space-y-2">
                    <Label htmlFor="routingNumber">Routing Number</Label>
                    <Input
                      id="routingNumber"
                      type="text"
                      placeholder="110000000"
                      value={routingNumber}
                      onChange={(e) => setRoutingNumber(e.target.value)}
                      data-testid="routing-number-input"
                    />
                  </div>
                </div>
                <div className="space-y-2">
                  <Label htmlFor="accountHolderName">Account Holder Name</Label>
                  <Input
                    id="accountHolderName"
                    placeholder="John Doe"
                    value={accountHolderName}
                    onChange={(e) => setAccountHolderName(e.target.value)}
                    data-testid="account-holder-name-input"
                  />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="accountHolderType">Account Holder Type</Label>
                  <select
                    id="accountHolderType"
                    className="w-full px-3 py-2 border rounded-md"
                    value={accountHolderType}
                    onChange={(e) => setAccountHolderType(e.target.value)}
                    data-testid="account-holder-type-select"
                  >
                    <option value="individual">Individual</option>
                    <option value="company">Company</option>
                  </select>
                </div>
                <Button 
                  onClick={handleAddBankAccount} 
                  disabled={loading}
                  className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"
                  data-testid="add-bank-account-button"
                >
                  {loading ? 'Adding...' : 'Add Bank Account'}
                </Button>
              </CardContent>
            </Card>

            <Card className="shadow-lg border-0">
              <CardHeader>
                <CardTitle>Your Bank Accounts</CardTitle>
                <CardDescription>Manage your connected bank accounts</CardDescription>
              </CardHeader>
              <CardContent>
                {bankAccounts.length === 0 ? (
                  <p className="text-center text-gray-500 py-8">No bank accounts found</p>
                ) : (
                  <div className="space-y-4">
                    {bankAccounts.map((account) => (
                      <div key={account.id} className="border rounded-lg p-4 hover:shadow-md transition-shadow" data-testid={`bank-account-${account.id}`}>
                        <div className="flex justify-between items-start">
                          <div className="flex-1">
                            <div className="flex items-center gap-3 mb-2">
                              <p className="font-semibold text-lg">
                                {account.bank_name || 'Bank Account'} ****{account.last4}
                              </p>
                              {account.default_for_currency && (
                                <Badge className="bg-blue-100 text-blue-800">Default</Badge>
                              )}
                              {getStatusBadge(account.status)}
                            </div>
                            <div className="text-sm text-gray-600 space-y-1">
                              <p>Holder: {account.account_holder_name}</p>
                              <p>Country: {account.country} | Currency: {account.currency.toUpperCase()}</p>
                              {account.routing_number && <p>Routing: {account.routing_number}</p>}
                            </div>
                          </div>
                          <div className="flex flex-col gap-2">
                            {!account.default_for_currency && (
                              <Button 
                                onClick={() => handleSetDefaultBankAccount(account.id)} 
                                variant="outline" 
                                size="sm"
                                disabled={loading}
                                data-testid={`set-default-${account.id}`}
                              >
                                Set Default
                              </Button>
                            )}
                            <Button 
                              onClick={() => handleDeleteBankAccount(account.id)} 
                              variant="destructive" 
                              size="sm"
                              disabled={loading}
                              data-testid={`delete-bank-account-${account.id}`}
                            >
                              Delete
                            </Button>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </CardContent>
            </Card>
          </TabsContent>

          {/* Profile Tab */}
          <TabsContent value="profile" className="space-y-6">
            {account?.type === 'standard' && (
              <Card className="shadow-lg border-0 bg-yellow-50 border-yellow-200">
                <CardContent className="pt-6">
                  <div className="flex items-start gap-3">
                    <svg className="w-6 h-6 text-yellow-600 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    <div>
                      <p className="font-semibold text-yellow-800">Note for Standard Accounts</p>
                      <p className="text-sm text-yellow-700 mt-1">
                        Standard Stripe accounts cannot update business profiles via API. Please visit the{' '}
                        <a 
                          href="https://dashboard.stripe.com/settings/business" 
                          target="_blank" 
                          rel="noopener noreferrer"
                          className="underline font-medium hover:text-yellow-900"
                        >
                          Stripe Dashboard
                        </a> to update your business information.
                      </p>
                    </div>
                  </div>
                </CardContent>
              </Card>
            )}
            
            <Card className="shadow-lg border-0">
              <CardHeader>
                <CardTitle>Update Business Profile</CardTitle>
                <CardDescription>Update your business information {account?.type === 'standard' && '(Connect Accounts only)'}</CardDescription>
              </CardHeader>
              <CardContent className="space-y-4">
                <div className="space-y-2">
                  <Label htmlFor="businessName">Business Name</Label>
                  <Input
                    id="businessName"
                    placeholder="Acme Corporation"
                    value={businessName}
                    onChange={(e) => setBusinessName(e.target.value)}
                    data-testid="business-name-input"
                  />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="businessUrl">Website URL</Label>
                  <Input
                    id="businessUrl"
                    type="url"
                    placeholder="https://example.com"
                    value={businessUrl}
                    onChange={(e) => setBusinessUrl(e.target.value)}
                    data-testid="business-url-input"
                  />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="supportPhone">Support Phone</Label>
                  <Input
                    id="supportPhone"
                    type="tel"
                    placeholder="+1234567890"
                    value={supportPhone}
                    onChange={(e) => setSupportPhone(e.target.value)}
                    data-testid="support-phone-input"
                  />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="supportEmail">Support Email</Label>
                  <Input
                    id="supportEmail"
                    type="email"
                    placeholder="support@example.com"
                    value={supportEmail}
                    onChange={(e) => setSupportEmail(e.target.value)}
                    data-testid="support-email-input"
                  />
                </div>
                <Button 
                  onClick={handleUpdateProfile} 
                  disabled={loading}
                  className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"
                  data-testid="update-profile-button"
                >
                  {loading ? 'Updating...' : 'Update Profile'}
                </Button>
              </CardContent>
            </Card>

            {/* Current Profile Info */}
            {account?.business_profile && (
              <Card className="shadow-lg border-0">
                <CardHeader>
                  <CardTitle>Current Profile Information</CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {account.business_profile.name && (
                      <div>
                        <p className="text-sm text-gray-500">Business Name</p>
                        <p className="font-semibold">{account.business_profile.name}</p>
                      </div>
                    )}
                    {account.business_profile.url && (
                      <div>
                        <p className="text-sm text-gray-500">Website</p>
                        <p className="font-semibold">{account.business_profile.url}</p>
                      </div>
                    )}
                    {account.business_profile.support_phone && (
                      <div>
                        <p className="text-sm text-gray-500">Support Phone</p>
                        <p className="font-semibold">{account.business_profile.support_phone}</p>
                      </div>
                    )}
                    {account.business_profile.support_email && (
                      <div>
                        <p className="text-sm text-gray-500">Support Email</p>
                        <p className="font-semibold">{account.business_profile.support_email}</p>
                      </div>
                    )}
                  </div>
                </CardContent>
              </Card>
            )}
          </TabsContent>
        </Tabs>
      </div>
      <Toaster position="top-right" />
    </div>
  );
};

function App() {
  return (
    <div className="App">
      <BrowserRouter>
        <Routes>
          <Route path="/" element={<Home />} />
        </Routes>
      </BrowserRouter>
    </div>
  );
}

export default App;

================================================================================
FILE 5: /app/frontend/src/App.css
================================================================================

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.App {
  min-height: 100vh;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* Smooth transitions */
button,
input,
select,
textarea {
  transition: all 0.2s ease;
}

/* Focus states */
input:focus,
select:focus,
textarea:focus {
  outline: none;
  ring: 2px;
  ring-color: rgb(59 130 246);
}

/* Card hover effects */
.hover\:shadow-md:hover {
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
}

/* Loading animation */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

================================================================================
FILE 6: /app/frontend/.env
================================================================================

REACT_APP_BACKEND_URL=http://localhost:8001
WDS_SOCKET_PORT=3000

NOTE: Change REACT_APP_BACKEND_URL to your deployed backend URL

================================================================================
INSTALLATION INSTRUCTIONS
================================================================================

1. Backend Setup:
   cd backend
   pip install -r requirements.txt
   
2. Frontend Setup:
   cd frontend
   npm install
   # or
   yarn install
   
3. Start Backend:
   cd backend
   uvicorn server:app --reload --host 0.0.0.0 --port 8001
   
4. Start Frontend:
   cd frontend
   npm start
   # or
   yarn start
   
5. Open browser:
   http://localhost:3000

================================================================================
USAGE
================================================================================

1. Get your Stripe API key from: https://dashboard.stripe.com/apikeys
2. Enter your sk_test_... or sk_live_... key in the login screen
3. Click "Connect to Stripe"
4. Use the dashboard to:
   - View and create payouts
   - Manage bank accounts
   - View account information

Note: Standard Stripe accounts have limitations on profile updates via API.
These must be done through the Stripe Dashboard.

================================================================================
END OF FILE
================================================================================
